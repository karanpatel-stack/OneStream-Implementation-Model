<?xml version="1.0" encoding="utf-8"?>
<!--
    OneStream XF Environment Configuration
    Environment: PROD (Production)
    Application: MFG_Enterprise
    Last Updated: 2026-02-18

    This configuration file defines environment-specific settings for the
    PRODUCTION deployment of the OneStream XF manufacturing enterprise application.

    CRITICAL: This is the PRODUCTION configuration. Changes to this file must
    go through the change management process and be approved by the Release Manager.

    IMPORTANT: Do not store credentials in this file. All credentials are
    managed through the OneStream Credential Vault and environment variables.
-->
<EnvironmentConfig>

    <!-- Server and Application -->
    <ServerUrl>https://onestream.company.com</ServerUrl>
    <DatabaseName>OS_PROD</DatabaseName>
    <ApplicationName>MFG_Enterprise</ApplicationName>
    <EnvironmentName>Production</EnvironmentName>
    <EnvironmentCode>PROD</EnvironmentCode>

    <!-- Application Settings -->
    <Settings>
        <LogLevel>Warning</LogLevel>
        <SampleDataEnabled>false</SampleDataEnabled>
        <NotificationsEnabled>true</NotificationsEnabled>
        <BackupEnabled>true</BackupEnabled>
        <SessionTimeoutMinutes>30</SessionTimeoutMinutes>
        <MaxConcurrentUsers>250</MaxConcurrentUsers>
        <CalculationTimeoutMinutes>30</CalculationTimeoutMinutes>
        <ApiRateLimitEnabled>true</ApiRateLimitEnabled>
        <ApiRateLimitRequestsPerMinute>50</ApiRateLimitRequestsPerMinute>
        <PerformanceProfilingEnabled>false</PerformanceProfilingEnabled>
        <AuditTrailDetailLevel>Standard</AuditTrailDetailLevel>
        <DataValidationStrictness>Strict</DataValidationStrictness>
        <TestModeEnabled>false</TestModeEnabled>
    </Settings>

    <!-- High Availability Configuration -->
    <HighAvailability>
        <Enabled>true</Enabled>
        <AppServerNodes>2</AppServerNodes>
        <WebServerNodes>2</WebServerNodes>
        <DatabaseAlwaysOn>true</DatabaseAlwaysOn>
        <LoadBalancer>F5</LoadBalancer>
        <LoadBalancerVIP>10.100.50.100</LoadBalancerVIP>
        <HealthCheckEndpoint>/api/health</HealthCheckEndpoint>
        <HealthCheckIntervalSeconds>30</HealthCheckIntervalSeconds>
        <FailoverMode>Automatic</FailoverMode>
    </HighAvailability>

    <!-- Source System Connections (Production instances) -->
    <Connections>
        <Connection Name="CONN_SAP_HANA" Type="JDBC">
            <ServerHost>saphana.corp.internal</ServerHost>
            <Port>30015</Port>
            <DatabaseSchema>SAPPROD</DatabaseSchema>
            <AuthMethod>SQLLogin</AuthMethod>
            <CredentialVaultKey>SAP_HANA_PROD</CredentialVaultKey>
            <UseSSL>true</UseSSL>
            <ConnectionPoolSize>10</ConnectionPoolSize>
            <ConnectionTimeoutSeconds>30</ConnectionTimeoutSeconds>
            <CommandTimeoutSeconds>600</CommandTimeoutSeconds>
        </Connection>
        <Connection Name="CONN_Oracle_EBS" Type="ODBC">
            <ServerHost>oradb.corp.internal</ServerHost>
            <Port>1521</Port>
            <ServiceName>EBSPROD</ServiceName>
            <AuthMethod>SQLLogin</AuthMethod>
            <CredentialVaultKey>ORACLE_EBS_PROD</CredentialVaultKey>
            <UseSSL>true</UseSSL>
            <ConnectionPoolSize>10</ConnectionPoolSize>
            <ConnectionTimeoutSeconds>30</ConnectionTimeoutSeconds>
            <CommandTimeoutSeconds>600</CommandTimeoutSeconds>
        </Connection>
        <Connection Name="CONN_NetSuite_API" Type="REST">
            <BaseUrl>https://12345.suitetalk.api.netsuite.com</BaseUrl>
            <AuthMethod>TokenBasedAuth</AuthMethod>
            <CredentialVaultKey>NETSUITE_PROD</CredentialVaultKey>
            <RequestTimeoutSeconds>120</RequestTimeoutSeconds>
            <MaxRetries>3</MaxRetries>
            <RetryDelaySeconds>30</RetryDelaySeconds>
            <RetryBackoffMultiplier>2</RetryBackoffMultiplier>
            <RateLimitRequestsPerMinute>10</RateLimitRequestsPerMinute>
        </Connection>
        <Connection Name="CONN_Workday_API" Type="REST">
            <BaseUrl>https://wd5.myworkday.com/ccx/api</BaseUrl>
            <AuthMethod>OAuth2ClientCredentials</AuthMethod>
            <CredentialVaultKey>WORKDAY_PROD</CredentialVaultKey>
            <TokenEndpoint>https://wd5.myworkday.com/ccx/oauth2/token</TokenEndpoint>
            <RequestTimeoutSeconds>120</RequestTimeoutSeconds>
            <MaxRetries>3</MaxRetries>
            <RetryDelaySeconds>30</RetryDelaySeconds>
            <RetryBackoffMultiplier>2</RetryBackoffMultiplier>
        </Connection>
        <Connection Name="CONN_MES_SFTP" Type="SFTP">
            <ServerHost>sftp.mfg.internal</ServerHost>
            <Port>22</Port>
            <RemotePath>/onestream/inbound/mes/</RemotePath>
            <ArchivePath>/onestream/archive/mes/</ArchivePath>
            <ErrorPath>/onestream/error/mes/</ErrorPath>
            <AuthMethod>SSHKey</AuthMethod>
            <CredentialVaultKey>MES_SFTP_PROD</CredentialVaultKey>
            <FileRetentionDays>90</FileRetentionDays>
        </Connection>
        <Connection Name="CONN_FileShare" Type="UNC">
            <Path>\\fileserver\onestream\data</Path>
            <AuthMethod>WindowsAuth</AuthMethod>
            <ArchivePath>\\fileserver\onestream\archive</ArchivePath>
        </Connection>
    </Connections>

    <!-- Email Configuration -->
    <Email>
        <SmtpServer>smtp.company.com</SmtpServer>
        <SmtpPort>587</SmtpPort>
        <UseTls>true</UseTls>
        <FromAddress>noreply@company.com</FromAddress>
        <FromDisplayName>OneStream Finance Platform</FromDisplayName>
        <!-- Production: No override; emails go to actual recipients -->
        <OverrideRecipient></OverrideRecipient>
        <AdminNotificationList>onestream-admins@company.com</AdminNotificationList>
        <DataOpsNotificationList>data-operations@company.com</DataOpsNotificationList>
        <FinanceNotificationList>finance-notifications@company.com</FinanceNotificationList>
    </Email>

    <!-- Backup Configuration -->
    <Backup>
        <Enabled>true</Enabled>
        <FullBackupSchedule>Daily 02:00</FullBackupSchedule>
        <DifferentialBackupSchedule>Hourly</DifferentialBackupSchedule>
        <TransactionLogBackupSchedule>Every15Minutes</TransactionLogBackupSchedule>
        <RetentionDays>30</RetentionDays>
        <BackupPath>\\backup-prod\onestream\OS_PROD</BackupPath>
        <OffSiteBackupEnabled>true</OffSiteBackupEnabled>
        <OffSiteBackupPath>\\offsite-backup\onestream\OS_PROD</OffSiteBackupPath>
        <CompressionEnabled>true</CompressionEnabled>
        <EncryptionEnabled>true</EncryptionEnabled>
        <VerifyAfterBackup>true</VerifyAfterBackup>
    </Backup>

    <!-- Data Management -->
    <DataManagement>
        <StagingSchema>STG</StagingSchema>
        <StagingRetentionDays>90</StagingRetentionDays>
        <ErrorRetentionDays>180</ErrorRetentionDays>
        <ParallelExtractionThreads>8</ParallelExtractionThreads>
        <BatchSize>100000</BatchSize>
        <MonitoringEnabled>true</MonitoringEnabled>
        <AlertOnFailure>true</AlertOnFailure>
        <AlertOnLateness>true</AlertOnLateness>
        <DailyLoadDeadline>06:00</DailyLoadDeadline>
    </DataManagement>

    <!-- Security -->
    <Security>
        <SSOEnabled>true</SSOEnabled>
        <SSOProvider>AzureAD</SSOProvider>
        <SSOMetadataUrl>https://login.microsoftonline.com/{tenant-id}/federationmetadata/2007-06/federationmetadata.xml</SSOMetadataUrl>
        <MFARequired>true</MFARequired>
        <PasswordPolicy>AzureADManaged</PasswordPolicy>
        <SessionConcurrencyLimit>3</SessionConcurrencyLimit>
        <DataEncryptionAtRest>true</DataEncryptionAtRest>
        <DataEncryptionInTransit>true</DataEncryptionInTransit>
        <AuditLogRetentionYears>7</AuditLogRetentionYears>
    </Security>

    <!-- Monitoring -->
    <Monitoring>
        <Enabled>true</Enabled>
        <MonitoringTool>SCOM</MonitoringTool>
        <CpuAlertThresholdPct>85</CpuAlertThresholdPct>
        <MemoryAlertThresholdPct>90</MemoryAlertThresholdPct>
        <DiskAlertThresholdPct>90</DiskAlertThresholdPct>
        <ResponseTimeAlertMs>5000</ResponseTimeAlertMs>
        <UptimeSLAPct>99.9</UptimeSLAPct>
    </Monitoring>

</EnvironmentConfig>
