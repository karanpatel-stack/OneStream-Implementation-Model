<?xml version="1.0" encoding="utf-8"?>
<!--
    OneStream XF Environment Configuration
    Environment: QA (Quality Assurance)
    Application: MFG_Enterprise_QA
    Last Updated: 2026-02-18

    This configuration file defines environment-specific settings for the
    QA deployment of the OneStream XF manufacturing enterprise application.
    QA uses production-mirror data for realistic integration and UAT testing.

    IMPORTANT: Do not store credentials in this file. All credentials are
    managed through the OneStream Credential Vault and environment variables.
-->
<EnvironmentConfig>

    <!-- Server and Application -->
    <ServerUrl>https://onestream-qa.company.com</ServerUrl>
    <DatabaseName>OS_QA</DatabaseName>
    <ApplicationName>MFG_Enterprise_QA</ApplicationName>
    <EnvironmentName>Quality Assurance</EnvironmentName>
    <EnvironmentCode>QA</EnvironmentCode>

    <!-- Application Settings -->
    <Settings>
        <LogLevel>Info</LogLevel>
        <SampleDataEnabled>true</SampleDataEnabled>
        <NotificationsEnabled>true</NotificationsEnabled>
        <BackupEnabled>true</BackupEnabled>
        <SessionTimeoutMinutes>60</SessionTimeoutMinutes>
        <MaxConcurrentUsers>50</MaxConcurrentUsers>
        <CalculationTimeoutMinutes>45</CalculationTimeoutMinutes>
        <ApiRateLimitEnabled>true</ApiRateLimitEnabled>
        <ApiRateLimitRequestsPerMinute>100</ApiRateLimitRequestsPerMinute>
        <PerformanceProfilingEnabled>false</PerformanceProfilingEnabled>
        <AuditTrailDetailLevel>Standard</AuditTrailDetailLevel>
        <DataValidationStrictness>Strict</DataValidationStrictness>
    </Settings>

    <!-- Source System Connections (QA instances) -->
    <Connections>
        <Connection Name="CONN_SAP_HANA" Type="JDBC">
            <ServerHost>saphana-qa.corp.internal</ServerHost>
            <Port>30015</Port>
            <DatabaseSchema>SAPQA</DatabaseSchema>
            <AuthMethod>SQLLogin</AuthMethod>
            <CredentialVaultKey>SAP_HANA_QA</CredentialVaultKey>
            <ConnectionPoolSize>5</ConnectionPoolSize>
            <ConnectionTimeoutSeconds>30</ConnectionTimeoutSeconds>
            <CommandTimeoutSeconds>300</CommandTimeoutSeconds>
        </Connection>
        <Connection Name="CONN_Oracle_EBS" Type="ODBC">
            <ServerHost>oradb-qa.corp.internal</ServerHost>
            <Port>1521</Port>
            <ServiceName>EBSQA</ServiceName>
            <AuthMethod>SQLLogin</AuthMethod>
            <CredentialVaultKey>ORACLE_EBS_QA</CredentialVaultKey>
            <ConnectionPoolSize>5</ConnectionPoolSize>
            <ConnectionTimeoutSeconds>30</ConnectionTimeoutSeconds>
            <CommandTimeoutSeconds>300</CommandTimeoutSeconds>
        </Connection>
        <Connection Name="CONN_NetSuite_API" Type="REST">
            <BaseUrl>https://12345-sb2.suitetalk.api.netsuite.com</BaseUrl>
            <AuthMethod>TokenBasedAuth</AuthMethod>
            <CredentialVaultKey>NETSUITE_QA</CredentialVaultKey>
            <RequestTimeoutSeconds>60</RequestTimeoutSeconds>
            <MaxRetries>3</MaxRetries>
            <RateLimitRequestsPerMinute>20</RateLimitRequestsPerMinute>
        </Connection>
        <Connection Name="CONN_Workday_API" Type="REST">
            <BaseUrl>https://wd5-impl2.myworkday.com/ccx/api</BaseUrl>
            <AuthMethod>OAuth2ClientCredentials</AuthMethod>
            <CredentialVaultKey>WORKDAY_QA</CredentialVaultKey>
            <TokenEndpoint>https://wd5-impl2.myworkday.com/ccx/oauth2/token</TokenEndpoint>
            <RequestTimeoutSeconds>60</RequestTimeoutSeconds>
            <MaxRetries>3</MaxRetries>
        </Connection>
        <Connection Name="CONN_MES_SFTP" Type="SFTP">
            <ServerHost>sftp-qa.mfg.internal</ServerHost>
            <Port>22</Port>
            <RemotePath>/onestream/inbound/mes/</RemotePath>
            <ArchivePath>/onestream/archive/mes/</ArchivePath>
            <AuthMethod>SSHKey</AuthMethod>
            <CredentialVaultKey>MES_SFTP_QA</CredentialVaultKey>
        </Connection>
        <Connection Name="CONN_FileShare" Type="UNC">
            <Path>\\fileserver-qa\onestream\data</Path>
            <AuthMethod>WindowsAuth</AuthMethod>
        </Connection>
    </Connections>

    <!-- Email Configuration -->
    <Email>
        <SmtpServer>smtp-qa.company.com</SmtpServer>
        <SmtpPort>587</SmtpPort>
        <UseTls>true</UseTls>
        <FromAddress>noreply-qa@company.com</FromAddress>
        <FromDisplayName>OneStream QA (Test Notifications)</FromDisplayName>
        <!-- QA notifications go to test recipient group only -->
        <OverrideRecipient>onestream-qa-testers@company.com</OverrideRecipient>
    </Email>

    <!-- Backup Configuration -->
    <Backup>
        <Enabled>true</Enabled>
        <Schedule>Daily 02:00</Schedule>
        <RetentionDays>14</RetentionDays>
        <BackupPath>\\backup-qa\onestream\OS_QA</BackupPath>
        <CompressionEnabled>true</CompressionEnabled>
    </Backup>

    <!-- Data Management -->
    <DataManagement>
        <StagingSchema>STG</StagingSchema>
        <StagingRetentionDays>14</StagingRetentionDays>
        <ErrorRetentionDays>60</ErrorRetentionDays>
        <ParallelExtractionThreads>4</ParallelExtractionThreads>
        <BatchSize>50000</BatchSize>
    </DataManagement>

    <!-- Data Masking (QA-specific: applied when refreshing from PROD) -->
    <DataMasking>
        <Enabled>true</Enabled>
        <MaskEmployeeNames>true</MaskEmployeeNames>
        <MaskSSN>true</MaskSSN>
        <MaskBankAccounts>true</MaskBankAccounts>
        <RandomizeSalary>true</RandomizeSalary>
        <SalaryVariancePct>15</SalaryVariancePct>
        <MaskCustomerNames>true</MaskCustomerNames>
        <PreserveFinancialAmounts>true</PreserveFinancialAmounts>
    </DataMasking>

</EnvironmentConfig>
